# DVH-IMS V1.5 — Phase 1 Planning: Archive (Read-Only)

**Status:** PROPOSED — NOT APPROVED
**Date:** 2026-02-07
**Authority:** Delroy
**Type:** Phase planning document (no implementation)

---

## 1. Phase Objective

Provide legally traceable, read-only access to completed dossiers for audit and oversight purposes. Improve operational transparency without modifying any existing workflow, decision logic, or data.

---

## 2. Definition of "Archived Case"

A case qualifies for archive visibility when it has reached a **terminal state**:

- `finalized` (conceptually referred to as "closed_approved" in earlier planning)
- `rejected` (conceptually referred to as "closed_rejected" in earlier planning)

**Terminology note:** The authoritative terminal states are defined by the database state model as `finalized` and `rejected`. The conceptual terms `closed_approved` and `closed_rejected` used in V1.2 planning documents map directly to these implemented states. The database state model is authoritative. No new dossier states are introduced or implied.

Cases in any other state (`draft`, `submitted`, `review_approved`, `revision_requested`, `approved`, `rejected`, `escalated`, `resolved`) are **not** archive-eligible — they remain active operational records.

Both **Bouwsubsidie** and **Woningregistratie** dossiers in terminal states are archive-eligible.

---

## 3. Role Visibility Matrix (Conceptual)

| Role | Archive Access | Visible Data Scope |
|------|---------------|-------------------|
| system_admin | Yes | All districts, all services |
| minister | Yes | All districts, Bouwsubsidie only |
| project_leader | Yes | All districts, all services |
| director | Yes | All districts, Bouwsubsidie only |
| ministerial_advisor | Yes | All districts, Bouwsubsidie only |
| audit | Yes | All districts, all services |
| frontdesk_bouwsubsidie | No | N/A |
| frontdesk_housing | No | N/A |
| admin_staff | No | N/A |
| social_field_worker | No | N/A |
| technical_inspector | No | N/A |

Archive access is limited to oversight, governance, and audit roles. Operational roles do not access the archive — they work with active case views.

---

## 4. Archive vs Active Case Views

- Archive is **read-only** — no actions, no state changes, no edits
- Archive shows **decision outcomes** and the **audit trail** for completed cases
- Active case views show **in-progress** cases with available actions per role
- Archive may include: case summary, decision chain history, status history timeline, associated documents (read-only links)
- Archive does **NOT** include: action buttons, edit forms, or workflow triggers

---

## 5. Scope Boundaries

### In Scope (Phase 1)

- Functional definition of archive eligibility
- Role-based archive access rules
- Conceptual information layout (what data is shown)
- Governance and audit requirements for archive access

### Explicitly Out of Scope

- Editing or reopening archived cases
- Workflow changes or new states
- New decision logic
- Financial calculations or budget logic
- Payment or disbursement handling
- PDF report generation (deferred to later in Phase 1 or Phase 2)
- Performance optimizations (conceptual notes only)
- CSV/batch export (enhancement, not core archive)

---

## 6. Governance and Audit Considerations

- **Immutability:** Archived data must reflect the exact state at closure. No post-hoc modifications.
- **Legal defensibility:** The archive must faithfully reproduce the decision chain as recorded in `status_history` and `audit_event`. No derived or computed summaries that could diverge from the legal record.
- **Retention:** Archived cases must remain accessible indefinitely. No automatic purge or expiration.
- **Access logging:** Every archive access (view of a closed case) should be logged to `audit_event` with action type indicating read/view of archived record. This supports accountability for who reviewed what and when.
- **Data integrity:** Archive views must pull from the same source tables as active views — no data duplication or separate archive storage.

---

## 7. Dependencies and Risks

### Dependencies

- V1.3 `status_history` table and `audit_event` table with `correlation_id` (implemented and verified)
- V1.4 decision panel data (technical review, social review, director review, advisor review, minister decision) — all persisted in existing tables
- Existing RLS policies for dossier access (must be extended or new policies created for archive-specific read access)

### Risks

- **Misinterpretation risk:** Users might assume the archive represents the complete legal file. The archive shows system-recorded data only, not external correspondence or physical documents.
- **Scope creep risk:** Requests for filtering, searching, or reporting within the archive could expand Phase 1 beyond its read-only transparency objective.
- **Policy constraint:** Some roles (e.g., minister) may have political sensitivities around historical decision visibility. Requires confirmation that all listed roles should have unrestricted archive access.

---

## 8. Open Questions and Decision Points

| ID | Question | Impact |
|----|----------|--------|
| Q1 | Should archive access be logged as a distinct audit event type (e.g., `ARCHIVE_VIEWED`)? | Audit granularity |
| Q2 | Should the archive include Woningregistratie cases or Bouwsubsidie only for V1.5 Phase 1? | Scope boundary |
| Q3 | Is there a requirement to restrict archive visibility by district for any role? | RLS design |
| Q4 | Should the archive display the full audit trail (all events) or a summarized decision chain? | Information density |
| Q5 | Are there any cases currently in terminal states that should be excluded from the archive (e.g., test data)? | Data quality |

---

## 9. Execution Gate

- Phase 1 planning is complete
- No Phase 1 implementation has started
- Implementation requires separate authorization

---

*No code, schema, RLS, or UI changes. Planning document only.*

---

## Change Log

| Date | Change | Classification |
|------|--------|---------------|
| 2026-02-07 | Terminology clarification: terminal states updated from conceptual `closed_approved`/`closed_rejected` to authoritative DB states `finalized`/`rejected`. Reason: alignment with implemented database state model. | Documentation clarification (non-functional) |
